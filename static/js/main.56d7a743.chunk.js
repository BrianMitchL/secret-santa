(this["webpackJsonpsecret-santa"]=this["webpackJsonpsecret-santa"]||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){e.exports=n(24)},22:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),u=n(13),l=n.n(u),a=(n(20),n(21),n(22),n(10)),c=n(1),o=n(3),i=n(6),m=(n(12),n(7));function s(e){var t=e.children;return r.createElement("span",{className:"validation"},t)}var d=function(e){var t=e.usedNames,n=e.usedGroups,u=e.onSubmit,l=Object(i.b)(),a=l.errors,c=l.handleSubmit,o=l.register,d=l.reset;return r.createElement("form",{onSubmit:c((function(e){u({name:e.name,group:""===e.group?void 0:e.group}),d()}))},r.createElement("fieldset",null,r.createElement("legend",null,"Add a New Person"),r.createElement("label",{htmlFor:"name",className:"label-required"},"Name"),r.createElement("input",{id:"name",name:"name",type:"text",ref:o({required:"A name is required",validate:function(e){return e&&!t.includes(e)||"The name must be unique"}})}),r.createElement(m.a,{errors:a,name:"name",as:s}),r.createElement("label",{htmlFor:"group"},"Group"),r.createElement("input",{id:"group",name:"group",type:"text",list:"groupOptions",autoComplete:"off",ref:o}),r.createElement("datalist",{id:"groupOptions"},n.map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement("p",{className:"meta"},"Use groups for simple exclusions to prevent people in the same group from matching with each other."),r.createElement("button",{type:"submit"},"Add Person")))};function p(e){var t=e.people,n=e.removePerson,u=t.reduce((function(e,t){var n,r=e.find((function(e){var n;return e.group===(null!==(n=t.group)&&void 0!==n?n:null)}));r?r.people.push(t):e.push({group:null!==(n=t.group)&&void 0!==n?n:null,people:[t]});return e}),[]);return r.createElement("dl",null,u.map((function(e){var t;return r.createElement(r.Fragment,{key:null!==(t=e.group)&&void 0!==t?t:"fba449b5-deb3-400c-991c-4bac2bb1ad33"},r.createElement("dt",null,null===e.group?r.createElement("strong",null,"No Group"):e.group),e.people.map((function(e){return r.createElement("dd",{key:e.name},e.name," ",r.createElement("button",{onClick:function(){return n(e)}},"Remove"))})))})))}var E=n(2),f=n.n(E),b=n(5),g=n(14);function v(e){var t=e.pairs;return r.createElement("table",null,r.createElement("caption",null,"Secret Santa Matches"),r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Giver"),r.createElement("th",null,"Receiver"))),r.createElement("tbody",null,t.map((function(e){var t=Object(o.a)(e,2),n=t[0],u=t[1];return r.createElement("tr",{key:n.name},r.createElement("td",null,n.name,n.group&&" ".concat(n.group)),r.createElement("td",null,u.name,u.group&&" ".concat(u.group)))}))))}function h(e){var t=e.people,n=e.exclusions,u=r.useState([]),l=Object(o.a)(u,2),a=l[0],c=l[1],i=r.useState(null),m=Object(o.a)(i,2),s=m[0],d=m[1];r.useLayoutEffect((function(){c([])}),[t,n]);var p=function(){var e=Object(b.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.a)(t,n);case 3:r=e.sent,c(r.map((function(e,n){return[t[n],e]}))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d(e.t0),c([]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){d(null),p()},type:"button",disabled:t.length<1},"Match"),!s&&a.length>0&&r.createElement(v,{pairs:a}),s&&s.message)}var y=function(e){return e.type+e.subject+e.excludedType+e.excludedSubject},x=function(e){var t=e.exclusion,n=e.removeHandler;return r.createElement("dd",null,r.createElement("strong",null,t.subject)," cannot give to"," ","group"===t.excludedType&&"group ",r.createElement("strong",null,t.excludedSubject)," ",r.createElement("button",{onClick:n},"Remove"))};function S(e){var t=e.exclusions,n=e.removeExclusion,u=t.filter((function(e){return"name"===e.type})),l=t.filter((function(e){return"group"===e.type}));return r.createElement("dl",null,u.length>0&&r.createElement("dt",null,"Person"),u.map((function(e){return r.createElement(x,{key:e.key,exclusion:e,removeHandler:function(){return n(e.key)}})})),l.length>0&&r.createElement("dt",null,"Group"),l.map((function(e){return r.createElement(x,{key:e.key,exclusion:e,removeHandler:function(){return n(e.key)}})})))}var j=function(e){var t=e.usedNames,n=e.usedGroups,u=e.usedExclusionKeys,l=e.onSubmit,a=Object(i.b)(),c=a.errors,o=a.handleSubmit,d=a.register,p=a.reset,E=a.setError,f=a.watch,b=f("type","name"),g=f("excludedType","name");return r.createElement("form",{onSubmit:o((function(e){u.includes(y(e))?E("excludedSubject",{message:"This exclusion already exists"}):(l(e),p())}))},r.createElement("p",null,"A Source will not be matched with the Excluded."),r.createElement("fieldset",null,r.createElement("legend",null,"Source"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"name",defaultChecked:!0,ref:d({required:"A type is required"})})," ","Name"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"group",ref:d({required:"A type is required"})})," ","Group"),r.createElement(m.a,{errors:c,name:"type",as:s}),r.createElement("label",{htmlFor:"subject"},"Subject"),r.createElement("select",{id:"subject",name:"subject",disabled:("name"===b?t:n).length<1,ref:d({required:"A ".concat(b," is required"),validate:function(e){return"name"===b?t.includes(e):n.includes(e)}})},("name"===b?t:n).map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement(m.a,{errors:c,name:"subject",as:s})),r.createElement("fieldset",null,r.createElement("legend",null,"Excluded"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"excludedType",value:"name",defaultChecked:!0,ref:d({required:"A type is required"})})," ","Name"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"excludedType",value:"group",ref:d({required:"A type is required"})})," ","Group"),r.createElement(m.a,{errors:c,name:"excludedType",as:s}),r.createElement("label",{htmlFor:"excludedSubject"},"Subject"),r.createElement("select",{id:"excludedSubject",name:"excludedSubject",disabled:("name"===g?t:n).length<1,ref:d({required:"A ".concat(g," is required"),validate:function(e){return"name"===g?t.includes(e):n.includes(e)}})},("name"===g?t:n).map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement(m.a,{errors:c,name:"excludedSubject",as:s})),r.createElement("button",{type:"submit"},"Add Exclusion"))};function k(e){var t=e.children,n=e.heading;return r.createElement("section",null,r.createElement("h2",null,n),t)}var q=function(e){return"string"===typeof e};function O(){var e=r.useState([]),t=Object(o.a)(e,2),n=t[0],u=t[1],l=r.useState([]),i=Object(o.a)(l,2),m=i[0],s=i[1],E=r.useMemo((function(){return n.map((function(e){return e.name}))}),[n]),f=r.useMemo((function(){return Object(c.a)(new Set(n.map((function(e){return e.group})).filter(q)))}),[n]),b=r.useMemo((function(){return m.map((function(e){return e.key}))}),[m]);return r.createElement("main",null,r.createElement(k,{heading:"People"},r.createElement(d,{usedNames:E,usedGroups:f,onSubmit:function(e){u((function(t){return t.concat(e)}))}}),r.createElement(p,{people:n,removePerson:function(e){u((function(t){return t.filter((function(t){return t.name!==e.name}))}))}})),r.createElement(k,{heading:"Exclusions"},r.createElement(j,{usedNames:E,usedGroups:f,usedExclusionKeys:b,onSubmit:function(e){s((function(t){return t.concat(Object(a.a)(Object(a.a)({},e),{},{key:y(e)}))}))}}),r.createElement(S,{exclusions:m,removeExclusion:function(e){s((function(t){return t.filter((function(t){return t.key!==e}))}))}})),r.createElement(k,{heading:"Matches"},r.createElement(h,{people:n,exclusions:m})))}var N=function(){return r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h1",null,"Secret Santa"),r.createElement("p",null,"By"," ",r.createElement("a",{href:"https://brianm.me",rel:"noopener noreferrer"},"Brian Mitchell"))),r.createElement(O,null))};l.a.render(r.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.56d7a743.chunk.js.map