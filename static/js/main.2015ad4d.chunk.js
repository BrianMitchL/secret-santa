(this["webpackJsonpsecret-santa"]=this["webpackJsonpsecret-santa"]||[]).push([[0],{15:function(e,t,n){},28:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),s=n(17),i=n.n(s),o=(n(26),n(27),n(28),n(11)),u=n(3),l=n(4),a=n(8),d=(n(15),n(9));function j(e){var t=e.children;return Object(r.jsx)("span",{className:"validation",children:t})}var b=function(e){var t=e.usedNames,n=e.usedGroups,c=e.onSubmit,s=Object(a.b)(),i=s.errors,o=s.handleSubmit,u=s.register,l=s.reset;return Object(r.jsx)("form",{onSubmit:o((function(e){c({name:e["person-name"],group:""===e["person-group"]?void 0:e["person-group"]}),l()})),children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("legend",{children:"Add a New Person"}),Object(r.jsx)("label",{htmlFor:"person-name",className:"label-required",children:"Name"}),Object(r.jsx)("input",{id:"person-name",name:"person-name",type:"text","aria-required":!0,ref:u({required:"A name is required",validate:function(e){return e&&!t.includes(e)||"The name must be unique"}})}),Object(r.jsx)(d.a,{errors:i,name:"person-name",as:j}),Object(r.jsx)("label",{htmlFor:"person-group",children:"Group"}),Object(r.jsx)("input",{id:"person-group",name:"person-group",type:"text",list:"groupOptions",autoComplete:"off",ref:u}),Object(r.jsx)("datalist",{id:"groupOptions",children:n.map((function(e){return Object(r.jsx)("option",{children:e},e)}))}),Object(r.jsx)("p",{className:"meta",children:"Use groups for simple exclusions to prevent people in the same group from matching with each other. For example, people in the same family or household."}),Object(r.jsx)("button",{type:"submit",children:"Add Person"})]})})},p=n(13);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var O=c.createElement("line",{x1:18,y1:6,x2:6,y2:18}),f=c.createElement("line",{x1:6,y1:6,x2:18,y2:18});function m(e,t){var n=e.title,r=e.titleId,s=x(e,["title","titleId"]);return c.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":r},s),n?c.createElement("title",{id:r},n):null,O,f)}var g=c.forwardRef(m);n.p;function y(e){var t=e.onClick;return Object(r.jsxs)("button",{onClick:t,className:"muted",title:"Remove",type:"button",children:[Object(r.jsx)(p.a,{children:"Remove"}),Object(r.jsx)(g,{"aria-hidden":!0})]})}function v(e){var t=e.people,n=e.removePerson,s=Object(c.useMemo)((function(){return function(e){return e.reduce((function(e,t){var n,r=e.find((function(e){var n;return e.group===(null!==(n=t.group)&&void 0!==n?n:null)}));return r?r.people.push(t):e.push({group:null!==(n=t.group)&&void 0!==n?n:null,people:[t]}),e}),[]).sort((function(e,t){return null===e.group||null===t.group?1:e.group.localeCompare(t.group)}))}(t)}),[t]);return t.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{id:"added-people-heading",children:"Added People"}),Object(r.jsx)("ul",{"aria-labelledby":"added-people-heading",children:s.map((function(e){var t,c="person-group-".concat(null!==(t=e.group)&&void 0!==t?t:"fba449b5-deb3-400c-991c-4bac2bb1ad33");return Object(r.jsxs)("li",{children:[Object(r.jsxs)("span",{id:c,children:[Object(r.jsx)(p.a,{children:"Group "}),null===e.group?"No Group":e.group]}),Object(r.jsx)("ul",{"aria-labelledby":c,children:e.people.map((function(e){return Object(r.jsxs)("li",{children:[e.name," ",Object(r.jsx)(y,{onClick:function(){return n(e)}})]},e.name)}))})]},c)}))})]}):null}var S=n(2),w=n.n(S),k=n(6),E=n(18);function N(e){var t=e.pairs,n=e.showGroups;return t.length<1?null:Object(r.jsxs)("table",{children:[Object(r.jsx)("caption",{children:"Secret Santa Matches"}),Object(r.jsxs)("thead",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{colSpan:n?2:1,children:"Giver"}),Object(r.jsx)("th",{colSpan:n?2:1,children:"Receiver"})]}),n&&Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Group"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Group"})]})]}),Object(r.jsx)("tbody",{children:t.map((function(e){var t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:c.name}),n&&Object(r.jsx)("td",{children:c.group}),Object(r.jsx)("td",{children:s.name}),n&&Object(r.jsx)("td",{children:s.group})]},c.name)}))})]})}var G=function(e,t){return GiftExchange.calculateSync(e,{exclusions:t,timeout:5e3}).map((function(t,n){return[e[n],t]}))},q=(n(32),window.location.origin+"/secret-santa/gift-exchange.umd.production.min.js"),A="No matches are possible with the given people and exclusions, or there was an error with the matching Worker. Please try again or change your configuration to allow everyone to match with someone.";function C(e){var t=e.people,n=e.exclusions,s=Object(c.useState)([]),i=Object(l.a)(s,2),o=i[0],u=i[1],a=Object(c.useState)(null),d=Object(l.a)(a,2),j=d[0],b=d[1],p=Object(c.useState)(!1),h=Object(l.a)(p,2),x=h[0],O=h[1];Object(c.useLayoutEffect)((function(){u([])}),[t,n]);var f=Object(E.a)(G,{autoTerminate:!1,remoteDependencies:[q]}),m=Object(l.a)(f,2),g=m[0],y=m[1],v=y.status,S=y.kill;Object(c.useEffect)((function(){"ERROR"===v&&b(new Error(A))}),[v]),Object(c.useEffect)((function(){return function(){S()}}),[S]);var C=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(null),e.prev=1,e.t0=u,e.next=5,g(t,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 9:e.prev=9,e.t2=e.catch(1),console.error(e.t2),b(new Error(A)),u([]);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:C,type:"button",disabled:t.length<1||"RUNNING"===v,children:"Match"})," ",Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",onChange:function(){return O((function(e){return!e}))},checked:x})," ","Show Groups"]}),j&&Object(r.jsx)("p",{className:"error",children:j.message}),Object(r.jsx)(N,{pairs:j?[]:o,showGroups:x})]})}var M=function(e){return e.type+e.subject+e.excludedType+e.excludedSubject},P=function(e){var t=e.exclusion,n=e.removeHandler;return Object(r.jsxs)("li",{children:[Object(r.jsx)("strong",{children:t.subject})," cannot give to"," ","group"===t.excludedType&&"group ",Object(r.jsx)("strong",{children:t.excludedSubject})," ",Object(r.jsx)(y,{onClick:n})]})};function T(e){var t=e.exclusions,n=e.removeExclusion;if(!t.length)return null;var c=t.filter((function(e){return"name"===e.type})),s=t.filter((function(e){return"group"===e.type}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{id:"added-exclusions-heading",children:"Added Exclusions"}),Object(r.jsxs)("ul",{"aria-labelledby":"added-exclusions-heading",children:[c.length>0&&Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{id:"added-exclusions-person",children:"Person"}),Object(r.jsx)("ul",{"aria-labelledby":"added-exclusions-person",children:c.map((function(e){return Object(r.jsx)(P,{exclusion:e,removeHandler:function(){return n(e.key)}},e.key)}))})]}),s.length>0&&Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{id:"added-exclusions-group",children:"Group"}),Object(r.jsx)("ul",{"aria-labelledby":"added-exclusions-group",children:s.map((function(e){return Object(r.jsx)(P,{exclusion:e,removeHandler:function(){return n(e.key)}},e.key)}))})]})]})]})}var F=function(e){var t=e.usedNames,n=e.usedGroups,c=e.usedExclusionKeys,s=e.onSubmit,i=Object(a.b)(),o=i.errors,u=i.handleSubmit,l=i.register,b=i.reset,p=i.setError,h=i.watch,x=h("type","name"),O=h("excludedType","name");return Object(r.jsxs)("form",{onSubmit:u((function(e){c.includes(M(e))?p("excludedSubject",{message:"This exclusion already exists"}):(s(e),b())})),style:{display:"flex",flexWrap:"wrap"},children:[Object(r.jsx)("p",{style:{flex:"1 0 100%"},children:"A Source will not be matched with the Excluded."}),Object(r.jsxs)("fieldset",{style:{flex:"1 0 auto"},children:[Object(r.jsx)("legend",{children:"Source"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"type",value:"name",defaultChecked:!0,ref:l({required:"A type is required"})})," ","Name"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"type",value:"group",ref:l({required:"A type is required"})})," ","Group"]}),Object(r.jsx)(d.a,{errors:o,name:"type",as:j}),Object(r.jsx)("label",{htmlFor:"subject",children:"Subject"}),Object(r.jsx)("select",{id:"subject",name:"subject",disabled:("name"===x?t:n).length<1,ref:l({required:"A ".concat(x," is required"),validate:function(e){return"name"===x?t.includes(e):n.includes(e)}}),children:("name"===x?t:n).map((function(e){return Object(r.jsx)("option",{children:e},e)}))}),Object(r.jsx)(d.a,{errors:o,name:"subject",as:j})]}),Object(r.jsxs)("fieldset",{style:{flex:"1 0 auto"},children:[Object(r.jsx)("legend",{children:"Excluded"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"excludedType",value:"name",defaultChecked:!0,ref:l({required:"A type is required"})})," ","Name"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"excludedType",value:"group",ref:l({required:"A type is required"})})," ","Group"]}),Object(r.jsx)(d.a,{errors:o,name:"excludedType",as:j}),Object(r.jsx)("label",{htmlFor:"excludedSubject",children:"Subject"}),Object(r.jsx)("select",{id:"excludedSubject",name:"excludedSubject",disabled:("name"===O?t:n).length<1,ref:l({required:"A ".concat(O," is required"),validate:function(e){return"name"===O?t.includes(e):n.includes(e)}}),children:("name"===O?t:n).map((function(e){return Object(r.jsx)("option",{children:e},e)}))}),Object(r.jsx)(d.a,{errors:o,name:"excludedSubject",as:j})]}),Object(r.jsx)("div",{style:{flex:"0 0 100%"},children:Object(r.jsx)("button",{type:"submit",children:"Add Exclusion"})})]})};function I(e){var t=e.children,n=e.heading;return Object(r.jsxs)("section",{children:[Object(r.jsx)("h2",{children:n}),t]})}var R=n(7),B=(n(33),new Date),L=Array.from(Array(12).keys()).map((function(e){return B.setMonth(e),B.toLocaleDateString(void 0,{month:"long"})}));function D(e){var t=e.setPeople,n=e.setExclusions,c=e.disabled;return Object(r.jsx)("button",{onClick:function(){t(L.map((function(e,t){return{name:e,group:(Math.floor(t%3)+1).toString()}})));var e=[{type:"group",subject:"1",excludedType:"name",excludedSubject:L[1]},{type:"name",subject:L[5],excludedType:"group",excludedSubject:"2"}];n(e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{key:M(e)})})))},type:"button",disabled:c,children:"Fill with Example Data"})}var H=function(e,t){var n=Object(c.useState)((function(){var n=localStorage.getItem(e);return null!==n?JSON.parse(n):t})),r=Object(l.a)(n,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(s))}),[s,e]),[s,i]},J=function(e){return"string"===typeof e};function W(){var e=H("secret-santa-people",[]),t=Object(l.a)(e,2),n=t[0],s=t[1],i=H("secret-santa-exclusions",[]),a=Object(l.a)(i,2),d=a[0],j=a[1],p=Object(c.useMemo)((function(){return n.map((function(e){return e.name}))}),[n]),h=Object(c.useMemo)((function(){return Object(u.a)(new Set(n.map((function(e){return e.group})).filter(J)))}),[n]),x=Object(c.useMemo)((function(){return d.map((function(e){return e.key}))}),[d]);return Object(r.jsxs)("main",{children:[Object(r.jsxs)("section",{children:[Object(r.jsx)("p",{children:"Create a matching of names for your gift exchange or Secret Santa. It supports grouping of people as well as directional exclusions based on the group or individual name to support all of your custom rules."}),Object(r.jsx)(D,{setPeople:s,setExclusions:j,disabled:n.length+d.length!==0})," ",Object(r.jsx)("button",{className:"danger",onClick:function(){s([]),j([])},children:"Clear"})]}),Object(r.jsxs)(R.e,{children:[Object(r.jsxs)(R.b,{children:[Object(r.jsx)(R.a,{children:"People"}),Object(r.jsx)(R.a,{children:"Exclusions"}),Object(r.jsx)(R.a,{disabled:n.length<1,children:"Matches"})]}),Object(r.jsxs)(R.d,{children:[Object(r.jsx)(R.c,{children:Object(r.jsxs)(I,{heading:"People",children:[Object(r.jsx)(b,{usedNames:p,usedGroups:h,onSubmit:function(e){s((function(t){return t.concat(e)}))}}),Object(r.jsx)(v,{people:n,removePerson:function(e){s((function(t){return t.filter((function(t){return t.name!==e.name}))}))}})]})}),Object(r.jsx)(R.c,{children:Object(r.jsxs)(I,{heading:"Exclusions",children:[Object(r.jsx)(F,{usedNames:p,usedGroups:h,usedExclusionKeys:x,onSubmit:function(e){j((function(t){return t.concat(Object(o.a)(Object(o.a)({},e),{},{key:M(e)}))}))}}),Object(r.jsx)(T,{exclusions:d,removeExclusion:function(e){j((function(t){return t.filter((function(t){return t.key!==e}))}))}})]})}),Object(r.jsx)(R.c,{children:Object(r.jsx)(I,{heading:"Matches",children:Object(r.jsx)(C,{people:n,exclusions:d})})})]})]})]})}var K=["\ud83c\udf85","\ud83c\udf85\ud83c\udffb","\ud83c\udf85\ud83c\udffc","\ud83c\udf85\ud83c\udffd","\ud83c\udf85\ud83c\udffe","\ud83c\udf85\ud83c\udfff","\ud83e\udd36","\ud83e\udd36\ud83c\udffb","\ud83e\udd36\ud83c\udffc","\ud83e\udd36\ud83c\udffd","\ud83e\udd36\ud83c\udffe","\ud83e\udd36\ud83c\udfff"],U=K[Math.floor(Math.random()*K.length)];var V=function(){return Object(c.useEffect)((function(){document.title="Secret Santa ".concat(U)}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("header",{children:[Object(r.jsxs)("h1",{children:["Secret Santa"," ",Object(r.jsx)("span",{role:"presentation","aria-hidden":"true",children:U})]}),Object(r.jsxs)("p",{children:["By"," ",Object(r.jsx)("a",{href:"https://brianm.me",rel:"noopener noreferrer",children:"Brian Mitchell"}),". View the source on"," ",Object(r.jsx)("a",{href:"https://github.com/BrianMitchL/secret-santa",rel:"noopener noreferrer",children:"GitHub"}),"."]})]}),Object(r.jsx)(W,{})]})};i.a.render(Object(r.jsx)(c.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.2015ad4d.chunk.js.map