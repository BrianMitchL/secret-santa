(this["webpackJsonpsecret-santa"]=this["webpackJsonpsecret-santa"]||[]).push([[0],{14:function(e,t,n){},19:function(e,t,n){e.exports=n(33)},26:function(e,t,n){},28:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(0),l=n.n(r),a=n(16),u=n.n(a),c=(n(24),n(25),n(26),n(12)),o=n(1),i=n(2),m=n(7),s=(n(14),n(8));function p(e){var t=e.children;return r.createElement("span",{className:"validation"},t)}var d=function(e){var t=e.usedNames,n=e.usedGroups,l=e.onSubmit,a=Object(m.b)(),u=a.errors,c=a.handleSubmit,o=a.register,i=a.reset;return r.createElement("form",{onSubmit:c((function(e){l({name:e["person-name"],group:""===e["person-group"]?void 0:e["person-group"]}),i()}))},r.createElement("fieldset",null,r.createElement("legend",null,"Add a New Person"),r.createElement("label",{htmlFor:"person-name",className:"label-required"},"Name"),r.createElement("input",{id:"person-name",name:"person-name",type:"text",ref:o({required:"A name is required",validate:function(e){return e&&!t.includes(e)||"The name must be unique"}})}),r.createElement(s.a,{errors:u,name:"person-name",as:p}),r.createElement("label",{htmlFor:"person-group"},"Group"),r.createElement("input",{id:"person-group",name:"person-group",type:"text",list:"groupOptions",autoComplete:"off",ref:o}),r.createElement("datalist",{id:"groupOptions"},n.map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement("p",{className:"meta"},"Use groups for simple exclusions to prevent people in the same group from matching with each other. For example, people in the same family or household."),r.createElement("button",{type:"submit"},"Add Person")))},f=n(11);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var b=l.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),g=l.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),y=function(e){var t=e.svgRef,n=e.title,r=h(e,["svgRef","title"]);return l.a.createElement("svg",E({width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",ref:t},r),n?l.a.createElement("title",null,n):null,b,g)},v=l.a.forwardRef((function(e,t){return l.a.createElement(y,E({svgRef:t},e))}));n.p;function x(e){var t=e.onClick;return l.a.createElement("button",{onClick:t,className:"muted",title:"Remove",type:"button"},l.a.createElement(f.a,null,"Remove"),l.a.createElement(v,{"aria-hidden":!0}))}function j(e){var t=e.people,n=e.removePerson,l=r.useMemo((function(){return function(e){return e.reduce((function(e,t){var n,r=e.find((function(e){var n;return e.group===(null!==(n=t.group)&&void 0!==n?n:null)}));r?r.people.push(t):e.push({group:null!==(n=t.group)&&void 0!==n?n:null,people:[t]});return e}),[]).sort((function(e,t){return null===e.group||null===t.group?1:e.group.localeCompare(t.group)}))}(t)}),[t]);return t.length?r.createElement(r.Fragment,null,r.createElement("h3",{id:"added-people-heading"},"Added People"),r.createElement("ul",{"aria-labelledby":"added-people-heading"},l.map((function(e){var t,l="person-group-".concat(null!==(t=e.group)&&void 0!==t?t:"fba449b5-deb3-400c-991c-4bac2bb1ad33");return r.createElement("li",{key:l},r.createElement("span",{id:l},r.createElement(f.a,null,"Group "),null===e.group?"No Group":e.group),r.createElement("ul",{"aria-labelledby":l},e.people.map((function(e){return r.createElement("li",{key:e.name},e.name," ",r.createElement(x,{onClick:function(){return n(e)}}))}))))})))):null}var S=n(3),k=n.n(S),w=n(5),O=n(17);function N(e){var t=e.pairs,n=e.showGroups;return t.length<1?null:r.createElement("table",null,r.createElement("caption",null,"Secret Santa Matches"),r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{colSpan:n?2:1},"Giver"),r.createElement("th",{colSpan:n?2:1},"Receiver")),n&&r.createElement("tr",null,r.createElement("th",null,"Name"),r.createElement("th",null,"Group"),r.createElement("th",null,"Name"),r.createElement("th",null,"Group"))),r.createElement("tbody",null,t.map((function(e){var t=Object(i.a)(e,2),l=t[0],a=t[1];return r.createElement("tr",{key:l.name},r.createElement("td",null,l.name),n&&r.createElement("td",null,l.group),r.createElement("td",null,a.name),n&&r.createElement("td",null,a.group))}))))}var G=function(e,t){return GiftExchange.calculateSync(e,{exclusions:t,timeout:5e3}).map((function(t,n){return[e[n],t]}))},q=(n(28),window.location.origin+"/secret-santa/gift-exchange.umd.production.min.js"),A="No matches are possible with the given people and exclusions, or there was an error with the matching Worker. Please try again or change your configuration to allow everyone to match with someone.";function M(e){var t=e.people,n=e.exclusions,l=r.useState([]),a=Object(i.a)(l,2),u=a[0],c=a[1],o=r.useState(null),m=Object(i.a)(o,2),s=m[0],p=m[1],d=r.useState(!1),f=Object(i.a)(d,2),E=f[0],h=f[1];r.useLayoutEffect((function(){c([])}),[t,n]);var b=Object(O.a)(G,{autoTerminate:!1,remoteDependencies:[q]}),g=Object(i.a)(b,2),y=g[0],v=g[1],x=v.status,j=v.kill;r.useEffect((function(){"ERROR"===x&&p(new Error(A))}),[x]),r.useEffect((function(){return function(){j()}}),[j]);var S=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(null),e.prev=1,e.t0=c,e.next=5,y(t,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 9:e.prev=9,e.t2=e.catch(1),console.error(e.t2),p(new Error(A)),c([]);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:S,type:"button",disabled:t.length<1||"RUNNING"===x},"Match")," ",r.createElement("label",null,r.createElement("input",{type:"checkbox",onChange:function(){return h((function(e){return!e}))},checked:E})," ","Show Groups"),s&&r.createElement("p",{className:"error"},s.message),r.createElement(N,{pairs:s?[]:u,showGroups:E}))}var P=function(e){return e.type+e.subject+e.excludedType+e.excludedSubject},C=function(e){var t=e.exclusion,n=e.removeHandler;return r.createElement("li",null,r.createElement("strong",null,t.subject)," cannot give to"," ","group"===t.excludedType&&"group ",r.createElement("strong",null,t.excludedSubject)," ",r.createElement(x,{onClick:n}))};function R(e){var t=e.exclusions,n=e.removeExclusion;if(!t.length)return null;var l=t.filter((function(e){return"name"===e.type})),a=t.filter((function(e){return"group"===e.type}));return r.createElement(r.Fragment,null,r.createElement("h3",{id:"added-exclusions-heading"},"Added Exclusions"),r.createElement("ul",{"aria-labelledby":"added-exclusions-heading"},l.length>0&&r.createElement("li",null,"Person",r.createElement("ul",null,l.map((function(e){return r.createElement(C,{key:e.key,exclusion:e,removeHandler:function(){return n(e.key)}})})))),a.length>0&&r.createElement("li",null,"Group",r.createElement("ul",null,a.map((function(e){return r.createElement(C,{key:e.key,exclusion:e,removeHandler:function(){return n(e.key)}})}))))))}var F=function(e){var t=e.usedNames,n=e.usedGroups,l=e.usedExclusionKeys,a=e.onSubmit,u=Object(m.b)(),c=u.errors,o=u.handleSubmit,i=u.register,d=u.reset,f=u.setError,E=u.watch,h=E("type","name"),b=E("excludedType","name");return r.createElement("form",{onSubmit:o((function(e){l.includes(P(e))?f("excludedSubject",{message:"This exclusion already exists"}):(a(e),d())})),style:{display:"flex",flexWrap:"wrap"}},r.createElement("p",{style:{flex:"1 0 100%"}},"A Source will not be matched with the Excluded."),r.createElement("fieldset",{style:{flex:"1 0 auto"}},r.createElement("legend",null,"Source"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"name",defaultChecked:!0,ref:i({required:"A type is required"})})," ","Name"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"type",value:"group",ref:i({required:"A type is required"})})," ","Group"),r.createElement(s.a,{errors:c,name:"type",as:p}),r.createElement("label",{htmlFor:"subject"},"Subject"),r.createElement("select",{id:"subject",name:"subject",disabled:("name"===h?t:n).length<1,ref:i({required:"A ".concat(h," is required"),validate:function(e){return"name"===h?t.includes(e):n.includes(e)}})},("name"===h?t:n).map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement(s.a,{errors:c,name:"subject",as:p})),r.createElement("fieldset",{style:{flex:"1 0 auto"}},r.createElement("legend",null,"Excluded"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"excludedType",value:"name",defaultChecked:!0,ref:i({required:"A type is required"})})," ","Name"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"excludedType",value:"group",ref:i({required:"A type is required"})})," ","Group"),r.createElement(s.a,{errors:c,name:"excludedType",as:p}),r.createElement("label",{htmlFor:"excludedSubject"},"Subject"),r.createElement("select",{id:"excludedSubject",name:"excludedSubject",disabled:("name"===b?t:n).length<1,ref:i({required:"A ".concat(b," is required"),validate:function(e){return"name"===b?t.includes(e):n.includes(e)}})},("name"===b?t:n).map((function(e){return r.createElement("option",{key:e},e)}))),r.createElement(s.a,{errors:c,name:"excludedSubject",as:p})),r.createElement("div",{style:{flex:"0 0 100%"}},r.createElement("button",{type:"submit"},"Add Exclusion")))};function T(e){var t=e.children,n=e.heading;return r.createElement("section",null,r.createElement("h2",null,n),t)}var B=n(6),H=(n(32),function(e){return"string"===typeof e});function L(){var e=r.useState([]),t=Object(i.a)(e,2),n=t[0],l=t[1],a=r.useState([]),u=Object(i.a)(a,2),m=u[0],s=u[1],p=r.useMemo((function(){return n.map((function(e){return e.name}))}),[n]),f=r.useMemo((function(){return Object(o.a)(new Set(n.map((function(e){return e.group})).filter(H)))}),[n]),E=r.useMemo((function(){return m.map((function(e){return e.key}))}),[m]);return r.createElement("main",null,r.createElement(B.e,null,r.createElement(B.b,null,r.createElement(B.a,null,"People"),r.createElement(B.a,null,"Exclusions"),r.createElement(B.a,{disabled:n.length<1},"Matches")),r.createElement(B.d,null,r.createElement(B.c,null,r.createElement(T,{heading:"People"},r.createElement(d,{usedNames:p,usedGroups:f,onSubmit:function(e){l((function(t){return t.concat(e)}))}}),r.createElement(j,{people:n,removePerson:function(e){l((function(t){return t.filter((function(t){return t.name!==e.name}))}))}}))),r.createElement(B.c,null,r.createElement(T,{heading:"Exclusions"},r.createElement(F,{usedNames:p,usedGroups:f,usedExclusionKeys:E,onSubmit:function(e){s((function(t){return t.concat(Object(c.a)(Object(c.a)({},e),{},{key:P(e)}))}))}}),r.createElement(R,{exclusions:m,removeExclusion:function(e){s((function(t){return t.filter((function(t){return t.key!==e}))}))}}))),r.createElement(B.c,null,r.createElement(T,{heading:"Matches"},r.createElement(M,{people:n,exclusions:m}))))))}var I=["\ud83c\udf85","\ud83c\udf85\ud83c\udffb","\ud83c\udf85\ud83c\udffc","\ud83c\udf85\ud83c\udffd","\ud83c\udf85\ud83c\udffe","\ud83c\udf85\ud83c\udfff","\ud83e\udd36","\ud83e\udd36\ud83c\udffb","\ud83e\udd36\ud83c\udffc","\ud83e\udd36\ud83c\udffd","\ud83e\udd36\ud83c\udffe","\ud83e\udd36\ud83c\udfff"],W=I[Math.floor(Math.random()*I.length)];var J=function(){return r.useEffect((function(){document.title="Secret Santa ".concat(W)}),[]),r.createElement(r.Fragment,null,r.createElement("header",null,r.createElement("h1",null,"Secret Santa"," ",r.createElement("span",{role:"presentation","aria-hidden":"true"},W)),r.createElement("p",null,"By"," ",r.createElement("a",{href:"https://brianm.me",rel:"noopener noreferrer"},"Brian Mitchell"),". View the source on"," ",r.createElement("a",{href:"https://github.com/BrianMitchL/secret-santa",rel:"noopener noreferrer"},"GitHub"),".")),r.createElement(L,null))};u.a.render(r.createElement(J,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0ff63742.chunk.js.map