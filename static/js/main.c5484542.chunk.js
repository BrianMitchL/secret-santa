(this["webpackJsonpsecret-santa"]=this["webpackJsonpsecret-santa"]||[]).push([[0],{15:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(17),s=n.n(c),i=(n(26),n(27),n(28),n(11)),o=n(3),u=n(4),l=n(8),a=(n(15),n(9)),d=n(1);function j(e){var t=e.children;return Object(d.jsx)("span",{className:"validation",children:t})}var b=function(e){var t=e.usedNames,n=e.usedGroups,r=e.onSubmit,c=Object(l.b)(),s=c.errors,i=c.handleSubmit,o=c.register,u=c.reset;return Object(d.jsx)("form",{onSubmit:i((function(e){r({name:e["person-name"],group:""===e["person-group"]?void 0:e["person-group"]}),u()})),children:Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Add a New Person"}),Object(d.jsx)("label",{htmlFor:"person-name",className:"label-required",children:"Name"}),Object(d.jsx)("input",{id:"person-name",name:"person-name",type:"text","aria-required":!0,ref:o({required:"A name is required",validate:function(e){return e&&!t.includes(e)||"The name must be unique"}})}),Object(d.jsx)(a.a,{errors:s,name:"person-name",as:j}),Object(d.jsx)("label",{htmlFor:"person-group",children:"Group"}),Object(d.jsx)("input",{id:"person-group",name:"person-group",type:"text",list:"groupOptions",autoComplete:"off",ref:o}),Object(d.jsx)("datalist",{id:"groupOptions",children:n.map((function(e){return Object(d.jsx)("option",{children:e},e)}))}),Object(d.jsx)("p",{className:"meta",children:"Use groups for simple exclusions to prevent people in the same group from matching with each other. For example, people in the same family or household."}),Object(d.jsx)("button",{type:"submit",children:"Add Person"})]})})},p=n(13);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var O=r.createElement("line",{x1:18,y1:6,x2:6,y2:18}),f=r.createElement("line",{x1:6,y1:6,x2:18,y2:18});function m(e,t){var n=e.title,c=e.titleId,s=x(e,["title","titleId"]);return r.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":c},s),n?r.createElement("title",{id:c},n):null,O,f)}var g=r.forwardRef(m);n.p;function y(e){var t=e.onClick;return Object(d.jsxs)("button",{onClick:t,className:"muted",title:"Remove",type:"button",children:[Object(d.jsx)(p.a,{children:"Remove"}),Object(d.jsx)(g,{"aria-hidden":!0})]})}function v(e){var t=e.people,n=e.removePerson,c=Object(r.useMemo)((function(){return function(e){return e.reduce((function(e,t){var n,r=e.find((function(e){var n;return e.group===(null!==(n=t.group)&&void 0!==n?n:null)}));return r?r.people.push(t):e.push({group:null!==(n=t.group)&&void 0!==n?n:null,people:[t]}),e}),[]).sort((function(e,t){return null===e.group||null===t.group?1:e.group.localeCompare(t.group)}))}(t)}),[t]);return t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{id:"added-people-heading",children:"Added People"}),Object(d.jsx)("ul",{"aria-labelledby":"added-people-heading",children:c.map((function(e){var t,r="person-group-".concat(null!==(t=e.group)&&void 0!==t?t:"fba449b5-deb3-400c-991c-4bac2bb1ad33");return Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{id:r,children:[Object(d.jsx)(p.a,{children:"Group "}),null===e.group?"No Group":e.group]}),Object(d.jsx)("ul",{"aria-labelledby":r,children:e.people.map((function(e){return Object(d.jsxs)("li",{children:[e.name," ",Object(d.jsx)(y,{onClick:function(){return n(e)}})]},e.name)}))})]},r)}))})]}):null}var S=n(2),w=n.n(S),k=n(6),E=n(18);function N(e){var t=e.pairs,n=e.showGroups;return t.length<1?null:Object(d.jsxs)("table",{children:[Object(d.jsx)("caption",{children:"Secret Santa Matches"}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{colSpan:n?2:1,children:"Giver"}),Object(d.jsx)("th",{colSpan:n?2:1,children:"Receiver"})]}),n&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Group"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Group"})]})]}),Object(d.jsx)("tbody",{children:t.map((function(e){var t=Object(u.a)(e,2),r=t[0],c=t[1];return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:r.name}),n&&Object(d.jsx)("td",{children:r.group}),Object(d.jsx)("td",{children:c.name}),n&&Object(d.jsx)("td",{children:c.group})]},r.name)}))})]})}var G=function(e,t){return GiftExchange.calculateSync(e,{exclusions:t,timeout:5e3}).map((function(t,n){return[e[n],t]}))},q=(n(34),window.location.origin+"/secret-santa/gift-exchange.umd.production.min.js"),A="No matches are possible with the given people and exclusions, or there was an error with the matching Worker. Please try again or change your configuration to allow everyone to match with someone.";function C(e){var t=e.people,n=e.exclusions,c=Object(r.useState)([]),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(null),a=Object(u.a)(l,2),j=a[0],b=a[1],p=Object(r.useState)(!1),h=Object(u.a)(p,2),x=h[0],O=h[1];Object(r.useLayoutEffect)((function(){o([])}),[t,n]);var f=Object(E.a)(G,{autoTerminate:!1,remoteDependencies:[q]}),m=Object(u.a)(f,2),g=m[0],y=m[1],v=y.status,S=y.kill;Object(r.useEffect)((function(){"ERROR"===v&&b(new Error(A))}),[v]),Object(r.useEffect)((function(){return function(){S()}}),[S]);var C=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(null),e.prev=1,e.t0=o,e.next=5,g(t,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 9:e.prev=9,e.t2=e.catch(1),console.error(e.t2),b(new Error(A)),o([]);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:C,type:"button",disabled:t.length<1||"RUNNING"===v,children:"Match"})," ",Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",onChange:function(){return O((function(e){return!e}))},checked:x})," ","Show Groups"]}),j&&Object(d.jsx)("p",{className:"error",children:j.message}),Object(d.jsx)(N,{pairs:j?[]:i,showGroups:x})]})}var M=function(e){return e.type+e.subject+e.excludedType+e.excludedSubject},P=function(e){var t=e.exclusion,n=e.removeHandler;return Object(d.jsxs)("li",{children:[Object(d.jsx)("strong",{children:t.subject})," cannot give to"," ","group"===t.excludedType&&"group ",Object(d.jsx)("strong",{children:t.excludedSubject})," ",Object(d.jsx)(y,{onClick:n})]})};function T(e){var t=e.exclusions,n=e.removeExclusion;if(!t.length)return null;var r=t.filter((function(e){return"name"===e.type})),c=t.filter((function(e){return"group"===e.type}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{id:"added-exclusions-heading",children:"Added Exclusions"}),Object(d.jsxs)("ul",{"aria-labelledby":"added-exclusions-heading",children:[r.length>0&&Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{id:"added-exclusions-person",children:"Person"}),Object(d.jsx)("ul",{"aria-labelledby":"added-exclusions-person",children:r.map((function(e){return Object(d.jsx)(P,{exclusion:e,removeHandler:function(){return n(e.key)}},e.key)}))})]}),c.length>0&&Object(d.jsxs)("li",{children:[Object(d.jsx)("span",{id:"added-exclusions-group",children:"Group"}),Object(d.jsx)("ul",{"aria-labelledby":"added-exclusions-group",children:c.map((function(e){return Object(d.jsx)(P,{exclusion:e,removeHandler:function(){return n(e.key)}},e.key)}))})]})]})]})}var F=function(e){var t=e.usedNames,n=e.usedGroups,r=e.usedExclusionKeys,c=e.onSubmit,s=Object(l.b)(),i=s.errors,o=s.handleSubmit,u=s.register,b=s.reset,p=s.setError,h=s.watch,x=h("type","name"),O=h("excludedType","name");return Object(d.jsxs)("form",{onSubmit:o((function(e){r.includes(M(e))?p("excludedSubject",{message:"This exclusion already exists"}):(c(e),b())})),style:{display:"flex",flexWrap:"wrap"},children:[Object(d.jsx)("p",{style:{flex:"1 0 100%"},children:"A Source will not be matched with the Excluded."}),Object(d.jsxs)("fieldset",{style:{flex:"1 0 auto"},children:[Object(d.jsx)("legend",{children:"Source"}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",name:"type",value:"name",defaultChecked:!0,ref:u({required:"A type is required"})})," ","Name"]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",name:"type",value:"group",ref:u({required:"A type is required"})})," ","Group"]}),Object(d.jsx)(a.a,{errors:i,name:"type",as:j}),Object(d.jsx)("label",{htmlFor:"subject",children:"Subject"}),Object(d.jsx)("select",{id:"subject",name:"subject",disabled:("name"===x?t:n).length<1,ref:u({required:"A ".concat(x," is required"),validate:function(e){return"name"===x?t.includes(e):n.includes(e)}}),children:("name"===x?t:n).map((function(e){return Object(d.jsx)("option",{children:e},e)}))}),Object(d.jsx)(a.a,{errors:i,name:"subject",as:j})]}),Object(d.jsxs)("fieldset",{style:{flex:"1 0 auto"},children:[Object(d.jsx)("legend",{children:"Excluded"}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",name:"excludedType",value:"name",defaultChecked:!0,ref:u({required:"A type is required"})})," ","Name"]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",name:"excludedType",value:"group",ref:u({required:"A type is required"})})," ","Group"]}),Object(d.jsx)(a.a,{errors:i,name:"excludedType",as:j}),Object(d.jsx)("label",{htmlFor:"excludedSubject",children:"Subject"}),Object(d.jsx)("select",{id:"excludedSubject",name:"excludedSubject",disabled:("name"===O?t:n).length<1,ref:u({required:"A ".concat(O," is required"),validate:function(e){return"name"===O?t.includes(e):n.includes(e)}}),children:("name"===O?t:n).map((function(e){return Object(d.jsx)("option",{children:e},e)}))}),Object(d.jsx)(a.a,{errors:i,name:"excludedSubject",as:j})]}),Object(d.jsx)("div",{style:{flex:"0 0 100%"},children:Object(d.jsx)("button",{type:"submit",children:"Add Exclusion"})})]})};function I(e){var t=e.children,n=e.heading;return Object(d.jsxs)("section",{children:[Object(d.jsx)("h2",{children:n}),t]})}var R=n(7),B=(n(35),new Date),L=Array.from(Array(12).keys()).map((function(e){return B.setMonth(e),B.toLocaleDateString(void 0,{month:"long"})}));function D(e){var t=e.setPeople,n=e.setExclusions,r=e.disabled;return Object(d.jsx)("button",{onClick:function(){t(L.map((function(e,t){return{name:e,group:(Math.floor(t%3)+1).toString()}})));var e=[{type:"group",subject:"1",excludedType:"name",excludedSubject:L[1]},{type:"name",subject:L[5],excludedType:"group",excludedSubject:"2"}];n(e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{key:M(e)})})))},type:"button",disabled:r,children:"Fill with Example Data"})}var H=function(e,t){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return null!==n?JSON.parse(n):t})),c=Object(u.a)(n,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(s))}),[s,e]),[s,i]},J=function(e){return"string"===typeof e};function W(){var e=H("secret-santa-people",[]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=H("secret-santa-exclusions",[]),l=Object(u.a)(s,2),a=l[0],j=l[1],p=Object(r.useMemo)((function(){return n.map((function(e){return e.name}))}),[n]),h=Object(r.useMemo)((function(){return Object(o.a)(new Set(n.map((function(e){return e.group})).filter(J)))}),[n]),x=Object(r.useMemo)((function(){return a.map((function(e){return e.key}))}),[a]);return Object(d.jsxs)("main",{children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("p",{children:"Create a matching of names for your gift exchange or Secret Santa. It supports grouping of people as well as directional exclusions based on the group or individual name to support all of your custom rules."}),Object(d.jsx)(D,{setPeople:c,setExclusions:j,disabled:n.length+a.length!==0})," ",Object(d.jsx)("button",{className:"danger",onClick:function(){c([]),j([])},children:"Clear"})]}),Object(d.jsxs)(R.e,{children:[Object(d.jsxs)(R.b,{children:[Object(d.jsx)(R.a,{children:"People"}),Object(d.jsx)(R.a,{children:"Exclusions"}),Object(d.jsx)(R.a,{disabled:n.length<1,children:"Matches"})]}),Object(d.jsxs)(R.d,{children:[Object(d.jsx)(R.c,{children:Object(d.jsxs)(I,{heading:"People",children:[Object(d.jsx)(b,{usedNames:p,usedGroups:h,onSubmit:function(e){c((function(t){return t.concat(e)}))}}),Object(d.jsx)(v,{people:n,removePerson:function(e){c((function(t){return t.filter((function(t){return t.name!==e.name}))}))}})]})}),Object(d.jsx)(R.c,{children:Object(d.jsxs)(I,{heading:"Exclusions",children:[Object(d.jsx)(F,{usedNames:p,usedGroups:h,usedExclusionKeys:x,onSubmit:function(e){j((function(t){return t.concat(Object(i.a)(Object(i.a)({},e),{},{key:M(e)}))}))}}),Object(d.jsx)(T,{exclusions:a,removeExclusion:function(e){j((function(t){return t.filter((function(t){return t.key!==e}))}))}})]})}),Object(d.jsx)(R.c,{children:Object(d.jsx)(I,{heading:"Matches",children:Object(d.jsx)(C,{people:n,exclusions:a})})})]})]})]})}var K=["\ud83c\udf85","\ud83c\udf85\ud83c\udffb","\ud83c\udf85\ud83c\udffc","\ud83c\udf85\ud83c\udffd","\ud83c\udf85\ud83c\udffe","\ud83c\udf85\ud83c\udfff","\ud83e\udd36","\ud83e\udd36\ud83c\udffb","\ud83e\udd36\ud83c\udffc","\ud83e\udd36\ud83c\udffd","\ud83e\udd36\ud83c\udffe","\ud83e\udd36\ud83c\udfff"],U=K[Math.floor(Math.random()*K.length)];var V=function(){return Object(r.useEffect)((function(){document.title="Secret Santa ".concat(U)}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{children:[Object(d.jsxs)("h1",{children:["Secret Santa"," ",Object(d.jsx)("span",{role:"presentation","aria-hidden":"true",children:U})]}),Object(d.jsxs)("p",{children:["By"," ",Object(d.jsx)("a",{href:"https://brianm.me",rel:"noopener noreferrer",children:"Brian Mitchell"}),". View the source on"," ",Object(d.jsx)("a",{href:"https://github.com/BrianMitchL/secret-santa",rel:"noopener noreferrer",children:"GitHub"}),"."]})]}),Object(d.jsx)(W,{})]})};s.a.render(Object(d.jsx)(r.StrictMode,{children:Object(d.jsx)(V,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c5484542.chunk.js.map